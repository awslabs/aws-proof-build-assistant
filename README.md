# AWS Proof Build Assistant

## Project Description

AWS Proof Build Assistant automatically extracts build information needed to build proofs.
The tool can then generate a proof-specific `Makefile` that developers can include in their own proof `Makefile`s. 
This significantly simplifies proof development and keeps proof builds consistent with code builds as the source tree evolves.
An example of a `Makefile` generated by AWS Proof Build Assistant is shown below:

    DEFINES += -DS2N_HAVE_EXECINFO
    DEFINES += -DS2N_NO_PQ_ASM
    DEFINES += -D_POSIX_C_SOURCE=200809L

    INCLUDES += -I$(SRCDIR)
    INCLUDES += -I$(SRCDIR)/api

    DEPENDENCIES += $(HELPERDIR)/source/make_common_datastructures.c
    DEPENDENCIES += $(HELPERDIR)/source/proof_allocators.c
    DEPENDENCIES += $(SRCDIR)/stuffer/s2n_stuffer.c
    DEPENDENCIES += $(SRCDIR)/utils/s2n_blob.c

## Repository Overview

* **Source Code**: The starting point for running AWS Proof Build Assistant is the [`arpa`](arpa) script. Additional source files are included in the [`lib`](lib) directory.
* **Testing**: Tests can be found in the [`test/`](test) directory. Testing the AWS Proof Build Assistant involves checking the well-formedness of generated JSON files.
* **Validation**: A validation approach for CBMC Proof suites can be found in the [`validation/`](validation) directory. Details are included in the directory [`readme.md`](validation/readme.md) file.
* **Documentation**: Documentation can be found in the [`docs/`](docs) directory which contains artifacts that can be built using `make` to generate an `index.html`.

## Requirements

* Python 3
* [Cmake](https://cmake.org/) : 
  * `apt-get install cmake`
  * `brew install cmake`
* [GNU cflow](https://www.gnu.org/software/cflow/) : 
  * `apt-get install cflow`
  * `brew install cflow`
* [Voluptuous](https://pypi.org/project/voluptuous/)
  * `python3 -m pip install voluptuous`

## Future Work

The source code contains multiple `TODO`s which propose small or medium-sized adjustments to the code.
More major feature requests, described at a high level, are listed below:

* Implement a `--dry-run/-n` command line flag for AWS Proof Build Assistant that outputs generated text to `stdout` instead of writing to a file.
* Implement an `arpa print` command that takes as input a function-under-test (and its location), then outputs a list of functions that are transitively called by the function-under-test.
* **INTEGRATION**: Improve the integration of `arpa` in the [aws-templates-for-cbmc-proofs](https://github.com/awslabs/aws-templates-for-cbmc-proofs) such that it makes better use of the `arpa` cli.